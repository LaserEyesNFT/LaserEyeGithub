webpackJsonp([9],{"92bz":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("mvHQ"),i=t.n(n),r=t("Xxa5"),s=t.n(r),l=t("exGp"),c=t.n(l),o=t("v1w/"),m=t("oAV5"),u=t("ONoB"),d=t("DHPL"),b=t("Pg0u"),p=t("YaEn"),N=Object(o.c)(),v=N.contractAddress,C=(N.contractName,N.marketContractName,N.chatroomContractName,N.likeContractName,N.BNSContractAddress),g=N.BNSContractName,k=N.bnsTokenName,f=v,S=Object(o.d)(),h={name:"BNSTokenPage",components:{},data:function(){return{bSignedIn:o.g.isUserSignedIn(),loginAddr:o.g.isUserSignedIn()?Object(o.a)():"",BNSClaimCfg:{kMaxClaimTimes:168e3,kMaxClaimTimesStr:"168,000"},distributionDataList:[{cat:"Claimers 1-21000",total:"10,500,000",detail:"Each get 500 $BNS."},{cat:"Claimers 21001-42000",total:"5,250,000",detail:"Each get 250 $BNS."},{cat:"Claimers 42001-63000",total:"2,625,000",detail:"Each get 125 $BNS."},{cat:"Claimers 63001-84000",total:"1,312,500",detail:"Each get 62.5 $BNS."},{cat:"Claimers 84001-105000",total:"656,250",detail:"Each get 31.25 $BNS."},{cat:"Claimers 105001-126000",total:"328,125",detail:"Each get 15.625 $BNS."},{cat:"Claimers 126001-147000",total:"164,062.5",detail:"Each get 7.8125 $BNS."},{cat:"Claimers 147001-168000",total:"82,031.25",detail:"Each get 3.90625 $BNS."}],curMemberName:"",bnsNamespace:"",bnsName:"",bBNSClaim:!1,bnsClaimTimes:0,bnsClaimCountPerHolder:0,reqFlags:{bReqTokenSummaryOk:!1,bReqPlayerBNSOk:!1}}},mounted:function(){var e=this;return c()(s.a.mark(function a(){var t,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=b.init(document.getElementById("charts")),e,n={title:{text:"Total: 20,917,968.75",left:"center"},tooltip:{trigger:"item",formatter:function(e){return e.marker+e.name+"<span style='margin-right:16px'></span>"+e.value.toLocaleString()+"<span style='margin-right:4px'></span>("+e.percent+"%)"}},series:[{top:"20%",type:"pie",radius:"90%",data:[{value:105e5,name:"Claimers 1-21000"},{value:525e4,name:"Claimers 21001-42000"},{value:2625e3,name:"Claimers 42001-63000"},{value:1312500,name:"Claimers 63001-84000"},{value:656250,name:"Claimers 84001-105000"},{value:328125,name:"Claimers 105001-126000"},{value:164062.5,name:"Claimers 126001-147000"},{value:82031.25,name:"Claimers 147001-168000"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t.setOption(n),e.bSignedIn?e.startReq():e.reqTokenSummary();case 5:case"end":return a.stop()}},a,e)}))()},methods:{onClickGoBack:function(){this.$route.params.hasOwnProperty("bFromXPage")?p.a.go(-1):p.a.push({path:"/x/tokens",replace:!0})},onClickLoginIn:function(){Object(o.e)()},startReq:function(){var e=this;return c()(s.a.mark(function a(){var t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.reqTokenSummary(),e.reqPlayerBNS(),t=e,setTimeout(function(){t.bReqTokenSummaryOk=t.bReqPlayerBNSOk=!0},5e3);case 4:case"end":return a.stop()}},a,e)}))()},reqTokenSummary:function(){var e=this;return c()(s.a.mark(function a(){var t,n,r,l,c;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="get_player_summary",n=e.bSignedIn?[Object(u.C)(Object(o.a)())]:[Object(u.C)(f)],r={contractAddress:v,contractName:k,functionName:t,functionArgs:n,network:S,senderAddress:f},e.reqFlags.bReqTokenSummaryOk=!1,a.next=6,Object(u.i)(r);case 6:l=a.sent,e.bInReq=!1,c=Object(u.m)(l),e.bBNSClaim=c.n.value,e.bnsClaimTimes=c.b.value,e.bnsClaimCountPerHolder=c.c.value/1e8,e.reqFlags.bReqTokenSummaryOk=!0,console.log("status: ",i()({bnsClaimTimes:e.bnsClaimTimes,bnsClaimCountPerHolder:e.bnsClaimCountPerHolder}));case 14:case"end":return a.stop()}},a,e)}))()},reqPlayerBNS:function(){var e=this;return c()(s.a.mark(function a(){var t,n,i,r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.reqFlags.bReqPlayerBNSOk=!1,t="resolve-principal",n=[Object(u.C)(Object(o.a)())],i={contractAddress:C,contractName:g,functionName:t,functionArgs:n,network:S,senderAddress:f},a.next=6,Object(u.i)(i);case 6:r=a.sent,(l=Object(u.m)(r)).type.includes("none")?(e.bnsNamespace="",e.bnsName=""):(e.bnsNamespace=Object(m.b)(l.value.namespace),e.bnsName=Object(m.b)(l.value.name)),e.reqFlags.bReqPlayerBNSOk=!0;case 10:case"end":return a.stop()}},a,e)}))()},onClickMemberClaim:function(){this.doClaim("member_claim")},onClickBNSClaim:function(){this.doClaim("bns_claim")},doClaim:function(e){var a=this,t={contractAddress:v,contractName:k,functionName:e,functionArgs:[],network:S,appDetails:Object(o.b)(),postConditions:[],onFinish:function(t){var n="member_claim"==e?"Member claim":"bns_claim"==e?"Claim $BNS":"";a.$notify({title:n,message:"Transaction has been sent, wait a while to be finished.",duration:8e3})}};Object(d.c)(t)}}},B={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{attrs:{id:"main"}},[t("div",{attrs:{id:"backBtn"}},[t("el-button",{attrs:{type:"info",plain:"",icon:"el-icon-back"},on:{click:e.onClickGoBack}},[e._v("Back")])],1),e._v(" "),t("div",{attrs:{id:"title"}},[t("div",[t("el-avatar",{attrs:{size:80,src:"https://ipfs.io/ipfs/QmZBDdk5ccRzyDpD5qjoGJKBFsXZriUc769n4y84ZwQ5Xg"}})],1),e._v("\n      $BNS\n    ")]),e._v(" "),t("div",{staticStyle:{width:"600px",height:"200px"},attrs:{id:"charts"}}),e._v(" "),t("el-table",{attrs:{data:e.distributionDataList,border:"",size:"mini",id:"distDetail"}},[t("el-table-column",{attrs:{prop:"cat",label:"Category",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"total",label:"Count",width:"130"}}),e._v(" "),t("el-table-column",{attrs:{label:"Detail"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.detail)+"\n          "),a.row.detail2?t("div",[e._v(e._s(a.row.detail2))]):e._e()]}}])})],1),e._v(" "),e.bSignedIn?e._e():t("div",{attrs:{id:"tipSign"}},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.onClickLoginIn}},[e._v("Sign in to claim")])],1),e._v(" "),e.bSignedIn?t("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.reqFlags.bReqTokenSummaryOk||!e.reqFlags.bReqPlayerBNSOk,expression:"!reqFlags.bReqTokenSummaryOk || !reqFlags.bReqPlayerBNSOk"}],attrs:{id:"claimArea"}},[e.reqFlags.bReqTokenSummaryOk&&e.reqFlags.bReqPlayerBNSOk?t("div",[t("div",{attrs:{id:"acct"}},[e._v("\n          Welcome: "),t("span",[e._v(e._s(e.curMemberName.length>0?e.bnsName.length>0?e.curMemberName+" ("+e.bnsName+"."+e.bnsNamespace+")":e.curMemberName+" ("+e.loginAddr+")":e.bnsName.length>0?e.bnsName+"."+e.bnsNamespace:e.loginAddr))])]),e._v(" "),t("div",{attrs:{id:"claimBtns"}},[t("div",{staticClass:"claimBtn"},[t("div",[t("el-button",{staticClass:"claimBtn",attrs:{disabled:e.bnsName.length<=0||!e.bBNSClaim||e.bnsClaimTimes>=e.BNSClaimCfg.kMaxClaimTimes||!("btc"==e.bnsNamespace||e.bnsName.length<=2&&("id"==e.bnsNamespace||"stx"==e.bnsNamespace||"app"==e.bnsNamespace||"stacks"==e.bnsNamespace)),type:"primary",round:""},on:{click:e.onClickBNSClaim}},[e._v("BNS claim")])],1),e._v(" "),t("div",{staticClass:"claimTip"},[e._v(e._s(e.bnsClaimTimes>=e.BNSClaimCfg.kMaxClaimTimes?"No remain":0==e.bnsName.length?"Not own .btc name, register at https://btc.us":e.bBNSClaim?"btc"==e.bnsNamespace?"claim "+e.bnsClaimCountPerHolder+" $BNS":"Not satisfy":"Claimed")+"\n            ")])])])]):e._e()]):e._e()],1)])},staticRenderFns:[]};var y=t("VU/8")(h,B,!1,function(e){t("EcKk")},"data-v-40e54b57",null);a.default=y.exports},EcKk:function(e,a){},mvHQ:function(e,a,t){e.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(e,a,t){var n=t("FeBl"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}});