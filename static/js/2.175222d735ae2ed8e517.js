webpackJsonp([2],{"1Zja":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("BO1k"),n=i.n(a),r=i("Xxa5"),l=i.n(r),c=i("Gu7T"),o=i.n(c),s=i("exGp"),u=i.n(s),d=i("bOdI"),b=i.n(d),v=i("YfTy"),h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"nft"}},[a("div",{attrs:{id:"tid"}},[t._v("#"+t._s(0==t.nftData.tid?"id":t.nftData.tid))]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:t.nftData.bio,placement:"top"}},[a("img",{attrs:{id:"img",src:"https://ipfs.io/ipfs/"+(t.nftData.cid.length>0?t.nftData.cid:"QmeiJEqLynPN8c13ZQKdo8VMyK62whnn1DWQrEF6dZTzep")}})]),t._v(" "),t.nftData.h&&t.nftData.h>=5?a("span",{staticClass:"heart"},[a("img",{attrs:{src:i("YfaA"),width:"16",height:"16"}}),t._v(" "),a("label",{staticClass:"h"},[t._v(t._s(t.nftData.h))])]):t._e(),t._v(" "),t.bAdmin?a("el-tooltip",{attrs:{effect:"dark",content:"Administrator",placement:"top"}},[a("i",{staticClass:"el-icon-s-custom admin"})]):t._e(),t._v(" "),a("div",{staticClass:"name"},[t._v(t._s(t.nftData.name))]),t._v(" "),t.act?a("div",{staticClass:"actbtns"},[1==t.act?a("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.h(!0,e)}}},[t._v("Accept")]):t._e(),t._v(" "),1==t.act||2==t.act?a("el-button",{attrs:{type:"warning",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.h(!1,e)}}},[t._v(t._s(1==t.act?"Decline":"Cancel"))]):t._e()],1):t._e()],1)])},staticRenderFns:[]};var m=i("VU/8")({name:"ClubMemberItem",props:["nftData","act","bAdmin"],methods:{h:function(t,e){this.$emit("click",t)}}},h,!1,function(t){i("SSmE")},"data-v-398519b7",null).exports,f=i("v1w/"),p=i("oAV5"),g=i("ONoB"),C=i("DHPL"),y=i("geuY"),_=i.n(y),k=i("lRwf"),x=i.n(k),D=i("YaEn"),O=i("aAyW"),T=Object(f.c)(),L=T.contractAddress,N=T.contractName,j=T.clubContractName,w=T.marketContractName,M=T.likeContractName,I=T.BNSContractAddress,S=T.BNSContractName,A=L,E=Object(f.d)(),F={name:"ClubPage",components:{ClubItem:v.a,ClubMemberItem:m},data:function(){var t;return t={bSignedIn:f.g.isUserSignedIn(),loadingClubCbFlag:0,curCtid:0,curBh:0,votePrice:0,curBalance:0,myTid:0,myAdminCtid:0,myApplyCtidList:[],myJoinCtidList:[],bIsMember:!1,clubNotice:"",clubData:{},maxNameLen:25,maxNoticeLen:200,bNoticeReadonly:!0,noticeExceedTip:"",bEditClubFlag:!1,maxBioLen:80,nameExceedTip:"",bioExceedTip:"",updateClubPrice:5e6,editClubData:{name:"",cid:"",bio:""},curTab:"members",bInreqAllMembers:!1,memberCount:0,memberTidList:[],memberNftDataList:[],memberTid2NftDataMap:{},chatCount:0,curChatMsgIndex:0,chatEmojiList:[],chatWriteMsg:"",lastChatTimeStr:"",reqChatFlag:0,chatExceedTip:"",chatMsgMaxLen:200,chatList:[],bChatTickFlag:!1,chatHeight:450,voteCount:0},b()(t,"votePrice",0),b()(t,"reqVoteFlag",0),b()(t,"bInCreateVote",!1),b()(t,"maxVoteTitleLen",100),b()(t,"maxVoteChoiceLen",25),b()(t,"createVoteData",{days:7,title:"",choiceList:["","","",""],bAllChoiceValid:!1,titleExceedTip:"",choiceExceedTip:["","","",""]}),b()(t,"voteDataList",[]),b()(t,"applyCount",0),b()(t,"reqApplyFlag",0),b()(t,"applyTidList",[]),b()(t,"applyNftDataList",[]),b()(t,"inviteCount",0),b()(t,"inviteTidList",[]),b()(t,"reqInviteFlag",0),b()(t,"inviteNftDataList",[]),b()(t,"inviteNFTData",{}),b()(t,"eventCount",0),b()(t,"reqEventFlag",0),b()(t,"eventDataList",[]),b()(t,"bDialogVisible",!1),b()(t,"bDialogLoading",!1),b()(t,"bDialogIsSelf",!1),b()(t,"bDialogForInvite",!1),b()(t,"dialogNftData",{name:"",minorName:""}),b()(t,"dialogNftPrice",0),b()(t,"dialogRegisterStr",""),b()(t,"dialogOwner",""),b()(t,"dialogBNS",""),b()(t,"likeCost",1e6),b()(t,"addr2bnsMap",{}),b()(t,"tid2BriefMap",{}),b()(t,"POW4",BigInt(1e4)),b()(t,"POW8",BigInt(1e8)),b()(t,"POW10",BigInt(1e10)),b()(t,"POW12",BigInt(1e12)),b()(t,"POW16",BigInt(1e16)),b()(t,"POW20",BigInt(1e20)),b()(t,"defaultAvatarCid","QmeiJEqLynPN8c13ZQKdo8VMyK62whnn1DWQrEF6dZTzep"),b()(t,"notMemberTip","Not join current club yet"),b()(t,"alreadyMemberTip","Already in club"),b()(t,"alreadyApply","Already applied"),b()(t,"clubApplyedFull","The club has been applied too much, please wait"),b()(t,"memberFull","Members full"),b()(t,"balanceUnenough","Balance not enough"),b()(t,"nameTaken","name already taken"),b()(t,"alreadyLiked","Already liked"),b()(t,"notExist","Not exist"),b()(t,"alreadyInvite","Already invite"),b()(t,"memeberInvitedFull","The member has been invited too much, please wait"),t},mounted:function(){var t=this;return u()(l.a.mark(function e(){var i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$route.params.hasOwnProperty("id")){e.next=2;break}return e.abrupt("return");case 2:if(t.curCtid=parseInt(t.$route.params.id),t.curCtid&&!(t.curCtid<=0)){e.next=5;break}return e.abrupt("return");case 5:t.loadSummary(),(i=t.chatEmojiList).push.apply(i,o()(O));case 7:case"end":return e.stop()}},e,t)}))()},methods:{loadSummary:function(){var t=this,e=[Object(g.y)(this.curCtid)];this.bSignedIn?e.push(Object(g.t)(Object(g.u)(Object(f.a)()))):e.push(Object(g.q)()),this.callReadonly(j,"get_club_cb",e,function(){t.loadingClubCbFlag=1},function(e){var i=e.data;t.curBh=Object(g.i)(i.bh),t.curBalance=Object(g.i)(i.b),t.myAdminCtid=Object(g.i)(i.actid),t.votePrice=t.myAdminCtid==t.curCtid?0:5e6,t.myApplyCtidList=Object(p.h)(i.apply),t.applyTidList=Object(p.h)(i.applyed),t.applyCount=t.applyTidList.length;var a=i.chat_ext.value.toString(10),n=BigInt(a),r=Math.floor(Number(n/t.POW10));n=BigInt(a.substr(r.toString().length)),t.chatCount=Number(r),t.curChatMsgIndex=t.chatCount;var l=Number(n);t.lastChatTimeStr=l>0?Object(p.e)(l):"0",t.memberCount=Object(g.i)(i.detail.value.data.count),t.memberTidList=t.parseMemberTidList(i.detail.value.data.members),t.eventCount=Object(g.i)(i.event_count),t.inviteTidList=Object(p.h)(i.invite),t.inviteCount=t.inviteTidList.length,t.myJoinCtidList=Object(p.h)(i.joins),t.clubNotice=9==i.notice.type?"":Object(p.b)(Object(g.i)(i.notice));var c=Object(g.i)(i.summary).value;t.clubData={name:Object(p.b)({value:c.name.value}),bio:Object(p.b)({value:c.bio.value}),cid:c.cid.value,adminTid:c.ud.value%1e4,createTimeStr:Object(p.g)(Math.floor(c.ud.value/1e4))},t.myTid=Object(g.i)(i.tid),t.voteCount=Object(g.i)(i.vote_count),t.bIsMember=t.myJoinCtidList.includes(t.curCtid),t.loadingClubCbFlag=2,t.memberCount!=t.memberTidList.length&&Object(p.i)(t,"members count inconsistent"),t.reqAllMembers()})},parseMemberTidList:function(t){var e=[],i=!0,a=!1,r=void 0;try{for(var l,c=n()(t.list);!(i=(l=c.next()).done);i=!0)for(var o=l.value,s=BigInt(o.value.toString(10));s>0;){var u=Number(s%this.POW4);u>0&&e.push(u);var d=s.toString();if(!(d.length>4))break;s=BigInt(d.substr(0,d.length-4))}}catch(t){a=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw r}}return e},onChangeNotice:function(){var t=this.clubNotice.trim(),e=0;t.length>8&&(e=Object(g.e)(t).buffer.byteLength),this.noticeExceedTip=e>this.maxNoticeLen?e+"/"+this.maxNoticeLen:""},onClickApply:function(){var t=this;return u()(l.a.mark(function e(){var i,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.myTid<=0)){e.next=3;break}return t.$confirm("Need own Laser Eye NFT first, go to mint?","tips",{confirmButtonText:"Ok",cancelButtonText:"Cancel",type:"info"}).then(function(){D.a.push({name:"MinePage",replace:!0,params:{tAct:"mint"}})}).catch(function(){}),e.abrupt("return");case 3:i=[Object(g.y)(t.myTid),Object(g.y)(t.curCtid)],a=t,n=t.createLoading("checking"),t.callReadonly(j,"get_apply_check_info",i,null,function(t){(n.close(),Object(g.i)(t.data.mflag)>0)?Object(p.i)(a,a.alreadyMemberTip):-1==Object(p.h)(t.data.applys).indexOf(a.curCtid)?Object(g.i)(t.data.applyed_count)>=10?Object(p.i)(a,a.clubApplyedFull):Object(g.i)(t.data.member_count)>=100?Object(p.i)(a,a.memberFull):a.callPublic(j,"member_apply",[i[1]],[],"Apply"):Object(p.i)(a,a.alreadyApply)});case 7:case"end":return e.stop()}},e,t)}))()},onClickEditNotice:function(){this.bNoticeReadonly=!1,this.originNotice=this.clubNotice,this.$refs.notice.focus()},onClickUpdateNotice:function(){var t=this,e=[Object(g.e)(this.clubNotice)];this.callPublic(j,"update_notice",e,[],"Update notice",function(){t.bNoticeReadonly=!0},function(){t.clubNotice=this.originNotice,t.bNoticeReadonly=!0})},onClickCancelUpdateNotice:function(){this.clubNotice=this.originNotice,this.bNoticeReadonly=!0},onClickInvite:function(){var t=this;this.$prompt("Input id or name","Invite",{confirmButtonText:"Ok",cancelButtonText:"Cancel"}).then(function(e){var i=e.value;t.tryInvite(i)})},tryInvite:function(t){var e=t.trim();if(!(e.length<=0)){var i=0;"#"==e.substr(0,1)?0!=(i=parseInt(e.substr(1)))&&i.toString().length==e.length-1||(i=0):0!=(i=parseInt(e))&&i.toString().length==e.length||(i=0);var a=null,n=null;if(this.inviteTid=0,i>0){if(this.memberTid2NftDataMap[i])return void Object(p.i)(this,this.alreadyMemberTip);this.inviteTid=i,a="get_member",n=[Object(g.y)(i)]}else a="resolve_name",n=[Object(g.e)(e.toLowerCase())];var r=this,l=this.createLoading("searching");this.callReadonly(N,a,n,null,function(t){if(l.close(),i>0){var e=null;9!=t.type&&(e={value:Object(g.i)(t)}),r.parseNftData(r.inviteNFTData,e),r.inviteNFTData.tid=i}else{var a=Object(g.i)(t);r.parseNftData(r.inviteNFTData,a.meta),r.inviteNFTData.tid=a.tid.value}null!=r.inviteNFTData.name&&0!=r.inviteNFTData.name.length?r.memberTid2NftDataMap[r.inviteNFTData.tid]?Object(p.i)(r,r.alreadyMemberTip):r.viewMember(r.inviteNFTData,!0):Object(p.i)(r,r.notExist)})}},onClickExit:function(){var t=this;this.$confirm("Are you sure want to exit current club ?","Warnings",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"warning"}).then(function(){var e=[Object(g.y)(t.curCtid)];t.callPublic(j,"exit",e,[],"Exit club")}).catch(function(){})},onClickEditClub:function(){this.bEditClubFlag=!0,0==this.editClubData.name.length&&(this.editClubData.name=this.clubData.name,this.editClubData.cid=this.clubData.cid,this.editClubData.bio=this.clubData.bio)},onChangeName:function(){var t=this.editClubData.name.trim(),e=0;t.length>8&&(e=Object(g.e)(t).buffer.byteLength),this.nameExceedTip=e>this.maxNameLen?e+"/"+this.maxNameLen:""},onChangeBio:function(){var t=this.editClubData.bio.trim(),e=0;t.length>8&&(e=Object(g.e)(t).buffer.byteLength),this.bioExceedTip=e>this.maxBioLen?e+"/"+this.maxBioLen:""},onClickSureEditClub:function(){var t=this,e=this.createLoading("checking"),i=Object(g.e)(this.editClubData.name);this.callReadonly(j,"get_edit_club_check_info",[i,Object(g.u)(Object(f.a)())],null,function(a){if(e.close(),t.curBh=Object(g.i)(a.data.bh),t.curBalance=Object(g.i)(a.data.balance),t.editClubData.name!=t.clubData.name&&Object(g.i)(a.data.taken))Object(p.i)(t,t.nameTaken);else if(t.curBalance<=t.updateClubPrice+1e4)Object(p.i)(t,t.balanceUnenough);else{var n=[i,Object(g.v)(t.editClubData.cid),Object(g.e)(t.editClubData.bio)],r=Object(g.p)(Object(f.a)(),g.c.LessEqual,new _.a(t.updateClubPrice));t.callPublic(j,"update_summary",n,[r],"Update club")}})},onClickTab:function(t,e){if("members"==this.curTab);else if("chat"==this.curTab){if(this.chatCount<=0)this.reqChatFlag=2;else if(0==this.reqChatFlag){this.infiniteHandler(null)}if(!this.bChatTickFlag){this.bChatTickFlag=!0;var i=this;setInterval(function(){i.refreshChat()},3e4)}}else"vote"==this.curTab?this.voteCount<=0?this.reqVoteFlag=2:0==this.reqVoteFlag&&this.reqVoteList():"apply"==this.curTab?this.applyCount<=0?this.reqApplyFlag=2:0==this.reqApplyFlag&&this.reqApplyList():"invite"==this.curTab?this.inviteCount<=0?this.reqInviteFlag=2:0==this.reqInviteFlag&&this.reqInviteList():"events"==this.curTab?this.eventCount<=0?this.reqEventFlag=2:0==this.reqEventFlag&&this.reqEventList():"settings"==this.curTab||console.assert(!1)},onClickMember:function(t){var e=this.memberNftDataList[t-1];this.viewMember(e)},viewMember:function(t,e){var i=this;return u()(l.a.mark(function a(){var n,r,c,o,s,u,d;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i.bDialogForInvite=e,i.bDialogVisible=!0,i.bDialogLoading=!0,i.dialogNftPrice=0,i.dialogOwner="",i.dialogBNS="",i.dialogRegisterStr="",i.dialogNftData=t,i.bDialogIsSelf=i.dialogNftData.tid==i.myTid,n="get_token_brief",r=null,i.dialogNftData.tid in i.tid2BriefMap&&(c=i.tid2BriefMap[i.dialogNftData.tid],Date.parse(new Date)-c.ts<=3e5&&(r=c.srvData)),null!=r){a.next=23;break}return o=i.dialogNftData.tid,s=[Object(g.y)(o)],u={contractAddress:L,contractName:w,functionName:n,functionArgs:s,network:E,senderAddress:A},a.next=18,Object(g.f)(u);case 18:if(d=a.sent,r=d.data,i.tid2BriefMap[o]={ts:Date.parse(new Date),srvData:r},o==i.dialogNftData.tid){a.next=23;break}return a.abrupt("return");case 23:i.bDialogLoading=!1,i.dialogNftPrice=9==r.list_info.type?0:Object(g.i)(r.list_info.value.data.price),i.dialogRegisterStr=9==r.time.type?"":Object(p.g)(Object(g.i)(r.time).value),i.dialogOwner=9==r.player.type?"":Object(g.i)(r.player).value,i.dialogOwner.length>0&&(i.dialogOwner in i.addr2bnsMap?i.dialogBNS=i.addr2bnsMap[i.dialogOwner]:i.resolvePlayer(i.dialogNftData.tid,i.dialogOwner));case 28:case"end":return a.stop()}},a,i)}))()},resolvePlayer:function(t,e){var i=this;return u()(l.a.mark(function a(){var n,r,c,o,s,u;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n="resolve-principal",r=[Object(g.u)(e)],c={contractAddress:I,contractName:S,functionName:n,functionArgs:r,network:E,senderAddress:A},a.next=5,Object(g.f)(c);case 5:o=a.sent,(s=Object(g.i)(o)).type.includes("none")?x.a.set(i.addr2bnsMap,e,""):(u=Object(p.b)(s.value.name)+"."+Object(p.b)(s.value.namespace),i.addr2bnsMap[e]=u,t==i.dialogNftData.tid&&i.dialogOwner==e&&(i.dialogBNS=u));case 8:case"end":return a.stop()}},a,i)}))()},onClickLike:function(){var t=this;return u()(l.a.mark(function e(){var i,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bSignedIn&&0!=t.myTid){e.next=2;break}return e.abrupt("return");case 2:return i=t,a=t.createLoading("loading"),n=[Object(g.y)(t.myTid),Object(g.y)(t.dialogNftData.tid)],e.next=7,t.callReadonly(M,"has_like",n,null,function(t){if(a.close(),Object(g.i)(t))Object(p.i)(i,i.alreadyLiked);else if(i.curBalance<=i.likeCost)Object(p.i)(i,i.balanceUnenough);else{var e=Object(g.p)(Object(f.a)(),g.c.LessEqual,new _.a(i.likeCost));i.callPublic(M,"like",[Object(g.y)(i.dialogNftData.tid)],[e],"Like")}});case 7:case"end":return e.stop()}},e,t)}))()},onClickTransfer:function(){var t=this;return u()(l.a.mark(function e(){var i,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,a="Are you sure transfer club to "+t.dialogNftData.name+" ?",t.$confirm(a,"Warnings",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"warning"}).then(function(){var t=[Object(g.y)(i.dialogNftData.tid)];i.callPublic(j,"transfer",t,[],"Transfer")}).catch(function(){});case 3:case"end":return e.stop()}},e,t)}))()},onClickKickout:function(){var t=this;return u()(l.a.mark(function e(){var i,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,a="Are you sure kick out "+t.dialogNftData.name+" ?",t.$confirm(a,"Warnings",{confirmButtonText:"I'm sure",cancelButtonText:"Cancel",type:"warning"}).then(function(){var t=[Object(g.y)(i.dialogNftData.tid)];i.callPublic(j,"kick_out",t,[],"Kick out")}).catch(function(){});case 3:case"end":return e.stop()}},e,t)}))()},onClickDialogInvite:function(){var t=this;return u()(l.a.mark(function e(){var i,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=[Object(g.y)(t.dialogNftData.tid),Object(g.y)(t.curCtid)],a=t,n=t.createLoading("checking"),t.callReadonly(j,"get_invite_check_info",i,null,function(t){if(n.close(),Object(g.i)(t.data.mflag)>0)Object(p.i)(a,a.alreadyMemberTip);else if(-1==Object(p.h)(t.data.invites).indexOf(a.dialogNftData.tid))if(Object(g.i)(t.data.invited_count)>=5)Object(p.i)(a,a.memeberInvitedFull);else if(Object(g.i)(t.data.member_count)>=100)Object(p.i)(a,a.memberFull);else{var e=[Object(g.y)(a.dialogNftData.tid)];a.callPublic(j,"club_invite",e,[],"Invite")}else Object(p.i)(a,a.alreadyInvite)});case 4:case"end":return e.stop()}},e,t)}))()},reqAllMembers:function(){this.bInreqAllMembers=!0;var t=this,e=this.memberTidList.slice(0,25),i=this.memberCount>25?this.memberTidList.slice(25,50):[],a=this.memberCount>50?this.memberTidList.slice(50,75):[],r=this.memberCount>75?this.memberTidList.slice(75,100):[],l=!1,c=0==i.length,o=0==a.length,s=0==r.length,u=[],d=[],b=[],v=[],h=function(){if(l&&c&&o&&s){t.memberNftDataList=u.concat(d).concat(b).concat(v);var e=t.clubData.adminTid,i=t.myTid;t.memberNftDataList.sort(function(t,a){return t.tid==e||a.tid==e?t.tid==e?-1:1:i>0&&(t.tid==i||a.tid==i)?t.tid==i?-1:1:t.tid<a.tid?-1:1});var a=!0,r=!1,h=void 0;try{for(var m,f=n()(t.memberNftDataList);!(a=(m=f.next()).done);a=!0){var p=m.value;t.memberTid2NftDataMap[p.tid]=p}}catch(t){r=!0,h=t}finally{try{!a&&f.return&&f.return()}finally{if(r)throw h}}t.bInreqAllMembers=!1}},m=Object(p.k)(e);if(this.callReadonly(N,"get_members",[m],null,function(i){u=t.parseSvrMemberList(e,i),l=!0,h()}),!c){var f=Object(p.k)(i);this.callReadonly(N,"get_members",[f],null,function(e){d=t.parseSvrMemberList(i,e),c=!0,h()})}if(!o){var g=Object(p.k)(a);this.callReadonly(N,"get_members",[g],null,function(e){b=t.parseSvrMemberList(a,e),o=!0,h()})}if(!s){var C=Object(p.k)(r);this.callReadonly(N,"get_members",[C],null,function(e){v=t.parseSvrMemberList(r,e),s=!0,h()})}},parseSvrMemberList:function(t,e,i){for(var a=Object(g.i)(e),n=[],r=0;r<t.length;r++){var l=a[r];if(l.value){var c=l.value.value;n.push({tid:t[r],name:Object(p.b)(c.name),minorName:Object(p.b)(c.minor_name),cid:c.cid.value,bio:Object(p.b)(c.bio),bh:c.ud.value%1e8,h:Math.floor(c.ud.value/1e8)%1e5})}else i&&n.push({tid:t[r],name:"#"+t[r]+"(Burned)",minorName:"",cid:"",bio:"",bh:0,h:0})}return n},onChangeWriteMsg:function(){var t=this.chatWriteMsg.trim(),e=0;t.length>50&&(e=Object(g.e)(t).buffer.byteLength),this.chatExceedTip=e>this.chatMsgMaxLen?e+"/"+this.chatMsgMaxLen:""},infiniteHandler:function(t){if(this.chatCount<=0||this.curChatMsgIndex<1)t&&(t.loaded(),t.complete());else{var e=Object(g.k)();e.list=[];for(var i=1;i<=20&&(e.list.push(Object(g.y)(this.curCtid+1e4*this.curChatMsgIndex--)),!(this.curChatMsgIndex<=0));i++);var a=this,r=this.createLoading("loading");this.callReadonly(j,"get_chats",[e],null,function(e){var i;r.close();var l=Object(g.i)(e),c=[],s=!0,u=!1,d=void 0;try{for(var b,v=n()(l);!(s=(b=v.next()).done);s=!0){var h=b.value;if(!h.value)break;var m=h.value.value.ud.value,f=m%1e4,C=Math.floor(m/1e4),y=a.memberTid2NftDataMap[f];c.push({bSelf:a.myTid==f,tid:f,name:y?y.name:"#"+a.myTid,cid:y?y.cid:a.defaultAvatarCid,dateStr:Object(p.g)(C),content:Object(p.b)(h.value.value.msg)})}}catch(t){u=!0,d=t}finally{try{!s&&v.return&&v.return()}finally{if(u)throw d}}(i=a.chatList).unshift.apply(i,o()(c.reverse())),a.chatList.length&&x.a.set(a.chatList,0,a.chatList[0]),t&&(t.loaded(),a.curChatMsgIndex<1&&t.complete()),2!=a.reqChatFlag&&(a.reqChatFlag=2,a.jumpToChatListEnd())})}},jumpToChatListEnd:function(){var t=this,e=this.$el.querySelectorAll(".el-table__body-wrapper"),i=function(e){if(null!=e.offsetParent&&e.offsetParent.offsetHeight==t.chatHeight)return setTimeout(function(){e.scrollTop=e.scrollHeight},0),"break"},a=!0,r=!1,l=void 0;try{for(var c,o=n()(e);!(a=(c=o.next()).done);a=!0){if("break"===i(c.value))break}}catch(t){r=!0,l=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw l}}},onClickSendMsg:function(){if(this.bSignedIn)if(this.bIsMember){var t=[Object(g.y)(this.curCtid),Object(g.e)(this.chatWriteMsg)],e=this;this.callPublic(j,"chat",t,[],"Chat",function(t){var i=e.memberTid2NftDataMap[e.myTid];e.chatList.push({bSelf:!0,bPending:!0,tid:e.myTid,name:i?i.name:"#"+e.myTid,cid:i?i.cid:e.defaultAvatarCid,dateStr:Object(p.g)(Math.floor(Date.now()/1e3)),content:e.chatWriteMsg}),e.chatWriteMsg="",e.jumpToChatListEnd()})}else Object(p.i)(this,this.notMemberTip);else Object(f.e)()},onClickEmoji:function(t){var e,i=document.getElementById("chatWriteMsgInput");e=this.chatEmojiList[t],i.setRangeText(e),i.selectionStart+=e.length,i.focus(),this.chatWriteMsg=i.value,this.onChangeWriteMsg()},onClickChatAvatar:function(t){if(t in this.memberTid2NftDataMap){var e=this.memberTid2NftDataMap[t];this.viewMember(e)}else{var i=[Object(g.y)(t)],a=this,n=this.createLoading("loading");this.callReadonly(N,"get_member",i,null,function(e){n.close();var i=null;9!=e.type&&(i={value:Object(g.i)(e)});var r={};a.parseNftData(r,i),r.name.length<=0?Object(p.i)(a,"Burned"):(r.tid=t,a.viewMember(r))})}},refreshChat:function(){var t=Object(g.k)();t.list=[];for(var e=1;e<=10;e++)t.list.push(Object(g.y)(this.curCtid+1e4*(this.chatCount+e)));var i=this,a=[];this.callReadonly(j,"get_chats",[t],null,function(t){var e=Object(g.i)(t),r=!0,l=!1,c=void 0;try{for(var o,s=n()(e);!(r=(o=s.next()).done);r=!0){var u=o.value;if(!u.value)break;var d=u.value.value.ud.value,b=Math.floor(d/1e4);a.push({content:Object(p.b)(u.value.value.msg),tid:d%1e4,stamp:b,dateStr:Object(p.g)(b)})}}catch(t){l=!0,c=t}finally{try{!r&&s.return&&s.return()}finally{if(l)throw c}}if(a.length>0){i.chatCount+=a.length,i.lastChatTimeStr=Object(p.e)(a[a.length-1].stamp);for(var v=[],h=i.chatList.length,m=1;m<=Math.min(10,h);m++){var f=h-m,C=i.chatList[f];if(C.bPending){for(var y=null,_=0;_<a.length;_++)if(a[_].content==C.content&&a[_].tid==C.tid){y=_;break}null==y&&v.unshift(C),i.chatList.splice(f,1)}}var k,x=!0,D=!1,O=void 0;try{for(var T,L=n()(a);!(x=(T=L.next()).done);x=!0){var N=T.value,j=i.memberTid2NftDataMap[N.tid];i.chatList.push({bSelf:N.tid==i.myTid,tid:N.tid,name:j?j.name:"#"+N.tid,cid:j?j.cid:i.defaultAvatarCid,dateStr:N.dateStr,content:N.content})}}catch(t){D=!0,O=t}finally{try{!x&&L.return&&L.return()}finally{if(D)throw O}}if(v.length>0)(k=i.chatList).push.apply(k,v);i.jumpToChatListEnd()}})},reqVoteList:function(){var t=Object(g.y)(this.myTid),e=Object(g.k)();e.list=[];for(var i=0;i<25;i++){var a=this.voteCount-i;if(!(a>0))break;e.list.push(Object(g.x)({k:Object(g.y)(this.curCtid+1e4*a),tid:t}))}var r=this;this.callReadonly(j,"get_votes",[e],function(){r.reqVoteFlag=1},function(t){var e=!0,i=!1,a=void 0;try{for(var l,c=n()(t.list);!(e=(l=c.next()).done);e=!0){var o,s=l.value,u=Object(g.i)(s.data.c),d=s.data.info.value.data,b=s.data.stat,v=[],h=0,m=d.start_at.value.toString(10),f=BigInt(m);h=Math.floor(Number(f/r.POW10)),o=Number(m.substr(h.toString().length));var C=Object(g.i)(d.choices),y=!0,_=!1,k=void 0;try{for(var x,D=n()(C);!(y=(x=D.next()).done);y=!0){var O=x.value;v.push(Object(p.b)(O))}}catch(t){_=!0,k=t}finally{try{!y&&D.return&&D.return()}finally{if(_)throw k}}for(var T=0,L=[],N=[],j=[],w=0,M=0,I=!1,S=b.value.toString(10),A=BigInt(S),E=0;E<v.length;E++){var F=Number(A%r.POW4);L.push(F),T+=F,F>M?(w=E+1,M=F,I=!1):F>0&&F==M&&(I=!0);var V=A.toString().length;A=V>4?BigInt(A.toString().substr(0,V-4)):BigInt(0)}for(var B=Object(g.i)(d.end_at),P=r.curBh>B&&M>0&&!I?w:0,q=0;q<L.length;q++){var R=T>0?L[q]/T*100:0,W=R.toString(),z=W.indexOf(".");z&&z>0&&(W=W.substr(0,z+2)),N.push(R),j.push(W)}var $={key:Object(g.i)(d.key),startBh:h,startTime:Object(p.g)(o),title:Object(p.b)({value:Object(g.i)(d.title)}),launcherTid:Object(g.i)(d.launcher),endBh:B,choices:v,selfChoice:u,stats:L,percentList:N,percentStrList:j,totalVote:T,winIndex:P};r.voteDataList.push($)}}catch(t){i=!0,a=t}finally{try{!e&&c.return&&c.return()}finally{if(i)throw a}}r.reqVoteFlag=2})},onClickLaunchVote:function(){this.bSignedIn?this.bIsMember?this.bInCreateVote=!0:Object(p.i)(this,this.notMemberTip):Object(f.e)()},onChangeVoteTitle:function(){var t=this.createVoteData.title.trim(),e=0;t.length>this.maxVoteTitleLen/3&&(e=Object(g.e)(t).buffer.byteLength),this.createVoteData.titleExceedTip=e>this.maxVoteTitleLen?e+"/"+this.maxVoteTitleLen:""},onChangeVoteChoice:function(t){for(var e=!0,i="",a=0;a<this.createVoteData.choiceList.length;a++){var n=this.createVoteData.choiceList[a].trim();a<2&&n.length<=0?e=!1:2==a?i=n:3==a&&n.length>0&&0==i.length&&(e=!1);var r=n.length>this.maxVoteChoiceLen/3?Object(g.e)(n).buffer.byteLength:0,l=r>this.maxVoteChoiceLen;this.createVoteData.choiceExceedTip[a]=l?r+"/"+this.maxVoteChoiceLen:"",l&&(e=!1)}this.createVoteData.bAllChoiceValid=e},onClickSureCreateVote:function(){var t=Object(g.k)();t.list=[];var e=!0,i=!1,a=void 0;try{for(var r,l=n()(this.createVoteData.choiceList);!(e=(r=l.next()).done);e=!0){var c=r.value.trim();if(!(c.length>0))break;t.list.push(Object(g.e)(c))}}catch(t){i=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw a}}var o=[Object(g.y)(this.curCtid),Object(g.y)(this.createVoteData.days),Object(g.e)(this.createVoteData.title),t];if(this.curAdminTid!=this.myTid){var s=Object(g.p)(Object(f.a)(),g.c.LessEqual,new _.a(this.votePrice));this.callPublic(j,"launch_vote",o,[s],"Launch vote")}else this.callPublic(j,"launch_vote",o,[],"Launch vote")},onClickVoteItem:function(t,e){if(this.bSignedIn)if(this.bIsMember){var i=Math.floor(t/1e4),a=[Object(g.y)(this.curCtid),Object(g.y)(i),Object(g.y)(e)];this.callPublic(j,"vote",a,[],"Vote")}else Object(p.i)(this,this.notMemberTip);else Object(f.e)()},reqApplyList:function(){if(!(this.applyTidList.length<=0)){var t=Object(p.k)(this.applyTidList),e=this;this.callReadonly(N,"get_members",[t],function(){e.reqApplyFlag=1},function(t){e.reqApplyFlag=2,e.applyNftDataList=e.parseSvrMemberList(e.applyTidList,t),e.applyNftDataList.length>0&&x.a.set(e.applyNftDataList,0,e.applyNftDataList[0])})}},onClickApplyMember:function(t){var e=this.applyNftDataList[t-1];this.viewMember(e)},onClickRespondApply:function(t,e){var i=e?"accept_member_apply":"decline_member_apply",a=e?"Accept apply":"Decline apply",n=this.applyNftDataList[t-1],r=[Object(g.y)(n.tid)];this.callPublic(j,i,r,[],a)},reqInviteList:function(){if(!(this.inviteTidList.length<=0)){var t=Object(p.k)(this.inviteTidList),e=this;this.callReadonly(N,"get_members",[t],function(){e.reqInviteFlag=1},function(t){e.reqInviteFlag=2,e.inviteNftDataList=e.parseSvrMemberList(e.inviteTidList,t),e.inviteNftDataList.length>0&&x.a.set(e.inviteNftDataList,0,e.inviteNftDataList[0])})}},onClickInviteMember:function(t){var e=this.inviteNftDataList[t-1];this.viewMember(e)},onClickCancelInvite:function(t){var e=this.inviteNftDataList[t-1],i=[Object(g.y)(e.tid)];this.callPublic(j,"club_cancel_invite",i,[],"Cancel invite")},reqEventList:function(){var t=this;return u()(l.a.mark(function e(){var i,a,r,c,o,s,u,d,b,v,h,m,f,C,y,_,k,D,O,T;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.eventCount<=0)){e.next=2;break}return e.abrupt("return");case 2:t.reqEventFlag=1,i=[],a=[],(r=Object(g.k)()).list=[],c=0;case 8:if(!(c<25)){e.next=18;break}if(!((o=t.eventCount-c)>0)){e.next=14;break}r.list.push(Object(g.y)(t.curCtid+1e4*o)),e.next=15;break;case 14:return e.abrupt("break",18);case 15:c++,e.next=8;break;case 18:return s=null,e.next=21,t.callReadonly(j,"get_club_events",[r],null,function(t){s=t});case 21:for(u=!0,d=!1,b=void 0,e.prev=24,v=n()(s.list);!(u=(h=v.next()).done);u=!0)m=h.value,f=m.value.toString(10),C=BigInt(f),y=Math.floor(Number(C/t.POW20)),C=BigInt(f.substr(y.toString().length)),_=Math.floor(Number(C/t.POW16)),C=BigInt(C.toString().substr(_.toString().length)),k=Math.floor(Number(C/t.POW12)),D=Number(C%t.POW12),a.push({timeStr:Object(p.g)(D),eventType:k}),i.push(_);e.next=32;break;case 28:e.prev=28,e.t0=e.catch(24),d=!0,b=e.t0;case 32:e.prev=32,e.prev=33,!u&&v.return&&v.return();case 35:if(e.prev=35,!d){e.next=38;break}throw b;case 38:return e.finish(35);case 39:return e.finish(32);case 40:O=Object(p.k)(i),T=t,t.callReadonly(N,"get_members",[O],null,function(t){var e=T.parseSvrMemberList(i,t,!0);a.length!=e.length&&Object(p.i)(T,"events inconsistent");for(var n=0;n<a.length;n++){var r=e.length>n?e[n].name:"?";1001==a[n].eventType?a[n].content=r+" accepts invite.":1002==a[n].eventType?a[n].content=r+" declines invite.":1003==a[n].eventType?a[n].content=r+" exits.":2003==a[n].eventType?a[n].content="club is transferred to "+r+".":2001==a[n].eventType?a[n].content="administrator accepts "+r+"'s apply.":2004==a[n].eventType?a[n].content="administrator kicks out "+r+".":console.assert(!1)}T.eventDataList=a,T.eventDataList.length>0&&x.a.set(T.eventDataList,0,T.eventDataList[0]),T.reqEventFlag=2});case 43:case"end":return e.stop()}},e,t,[[24,28,32,40],[33,,35,39]])}))()},parseNftData:function(t,e){var i=e&&e.value?e.value.value:null;t.name=i?Object(p.b)(i.name):"",t.minorName=i?Object(p.b)(i.minor_name):"",t.cid=i?i.cid.value:"",t.bio=i?Object(p.b)(i.bio):"",t.bh=i?i.ud.value%1e8:0,t.h=i?Math.floor(i.ud.value/1e8)%1e5:0},callReadonly:function(t,e,i,a,n){var r=this;return u()(l.a.mark(function c(){var o,s;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o={contractAddress:L,contractName:t,functionName:e,functionArgs:i,network:E,senderAddress:A},a&&a(),r.next=4,Object(g.f)(o);case 4:s=r.sent,n&&n(s);case 6:case"end":return r.stop()}},c,r)}))()},callPublic:function(t,e,i,a,n,r,l){var c=this,o={contractAddress:L,contractName:t,functionName:e,functionArgs:i,network:E,appDetails:Object(f.b)(),postConditions:a,onFinish:function(t){c.doNotify(n),r&&r(t)},onCancel:l};Object(C.c)(o)},getLocalTime:function(t){var e=new Date(1e3*parseInt(t)).toLocaleDateString("en-US"),i=e.lastIndexOf("/");return i&&(e=e.substr(0,i)),e},doNotify:function(t){this.$notify({title:t,message:"Transaction has been sent, wait a while to be finished",duration:8e3})},fmtBlock:function(t){return Object(p.d)(t)},createLoading:function(t){return this.$loading({lock:!0,text:t,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.05)"})}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:2!=t.loadingClubCbFlag,expression:"loadingClubCbFlag!=2"}],attrs:{id:"main"}},[2==t.loadingClubCbFlag?a("div",{attrs:{id:"clubArea"}},[a("ClubItem",{attrs:{id:"clubitem",clubData:t.clubData,act:t.bSignedIn&&!t.bIsMember?3:0},on:{click:t.onClickApply}}),t._v(" "),a("el-card",{attrs:{id:"noticeArea"}},[a("div",{attrs:{slot:"header",id:"noticeTitle"},slot:"header"},[a("span",{staticStyle:{color:"#333"}},[t._v("Notice:")]),t._v(" "),t.myAdminCtid==t.curCtid?a("el-button",{staticStyle:{padding:"2px 2px"},attrs:{size:"mini",circle:"",icon:"el-icon-edit"},on:{click:t.onClickEditNotice}}):t._e(),t._v(" "),t.bNoticeReadonly?t._e():a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini",round:""},on:{click:t.onClickCancelUpdateNotice}},[t._v("Cancel")]),t._v(" "),t.bNoticeReadonly?t._e():a("el-button",{staticStyle:{float:"right"},attrs:{disabled:t.noticeExceedTip.length>0,type:"primary",size:"mini",round:""},on:{click:t.onClickUpdateNotice}},[t._v("Update")])],1),t._v(" "),a("el-input",{ref:"notice",attrs:{id:"ta",type:"textarea",resize:"none",autosize:{minRows:4,maxRows:10},maxlength:t.maxNoticeLen,readonly:t.bNoticeReadonly,placeholder:"Not set."},on:{input:t.onChangeNotice},model:{value:t.clubNotice,callback:function(e){t.clubNotice=e},expression:"clubNotice"}}),t._v(" "),t.noticeExceedTip.length>0?a("div",{staticClass:"exceedTip"},[t._v(t._s(t.noticeExceedTip))]):t._e()],1)],1):t._e(),t._v(" "),2==t.loadingClubCbFlag?a("el-tabs",{attrs:{id:"tabs"},on:{"tab-click":t.onClickTab},model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},[a("el-tab-pane",{staticClass:"tp",attrs:{label:"Members"+(t.memberCount>0?" ("+t.memberCount+")":""),name:"members"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.bInreqAllMembers,expression:"bInreqAllMembers"}],staticClass:"myclubsdiv"},t._l(t.memberNftDataList.length,function(e){return a("button",{key:e,staticClass:"member",on:{click:function(i){return t.onClickMember(e)}}},[a("ClubMemberItem",{attrs:{nftData:t.memberNftDataList[e-1],bAdmin:1==e}})],1)}),0)]),t._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:1==t.reqChatFlag,expression:"reqChatFlag==1"}],staticClass:"tp",attrs:{label:"Chat ("+t.lastChatTimeStr+")",name:"chat"}},[a("div",{staticClass:"myclubsdiv"},[a("div",{attrs:{id:"chatdialog"}},[a("el-table",{ref:"multipleTable",attrs:{size:"small",height:t.chatHeight,border:"","empty-text":2==t.reqChatFlag?"Empty":" ",data:t.chatList}},[a("el-table-column",{attrs:{label:"Chat"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.bSelf?a("div",[a("button",{staticClass:"avatarBtn fright",on:{click:function(i){return t.onClickChatAvatar(e.row.tid)}}},[a("img",{staticClass:"avatar",attrs:{src:"https://ipfs.io/ipfs/"+e.row.cid}})]),t._v(" "),a("div",{staticClass:"commonnametimecontent fright"},[a("span",{staticClass:"commonnametime fright"},[t._v(t._s(e.row.dateStr)+"  "+t._s(e.row.name))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"contentonly fright"},[t._v("\n                        "+t._s(e.row.content)+"\n                        "),e.row.bPending?a("i",{staticClass:"el-icon-loading"}):t._e()])])]):a("div",[a("button",{staticClass:"avatarBtn",on:{click:function(i){return t.onClickChatAvatar(e.row.tid)}}},[a("img",{staticClass:"avatar",attrs:{src:"https://ipfs.io/ipfs/"+e.row.cid}})]),t._v(" "),a("div",{staticClass:"commonnametimecontent"},[a("span",{staticClass:"commonnametime"},[t._v(t._s(e.row.name)+"  "+t._s(e.row.dateStr))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"contentonly"},[t._v("\n                        "+t._s(e.row.content)+"\n                      ")])])])]}}],null,!1,1583283259)}),t._v(" "),a("infinite-loading",{ref:"infWidgetRef",attrs:{slot:"append",direction:"top","force-use-infinite-wrapper":".el-table__body-wrapper"},on:{infinite:t.infiniteHandler},slot:"append"},[a("template",{slot:"no-more"},[a("div",{staticStyle:{height:"0px"}},[t._v(" ")])])],2)],1),t._v(" "),a("div",{attrs:{id:"sendMsgArea"}},[a("div",{staticClass:"chatIcon"},[a("el-popover",{staticClass:"emoBox",attrs:{placement:"top-start",width:"400",trigger:"click"}},[a("div",{staticClass:"emotionList"},t._l(t.chatEmojiList,function(e,i){return a("a",{key:i,staticClass:"emotionItem",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.onClickEmoji(i)}}},[t._v(t._s(e))])}),0),t._v(" "),a("el-button",{staticClass:"popupslot",attrs:{slot:"reference"},slot:"reference"},[t._v("😀")])],1)],1),t._v(" "),a("el-input",{attrs:{maxlength:t.chatMsgMaxLen,placeholder:"Max "+t.chatMsgMaxLen+" characters",resize:"none",type:"textarea",id:"chatWriteMsgInput",autosize:{minRows:2,maxRows:6}},on:{input:t.onChangeWriteMsg},model:{value:t.chatWriteMsg,callback:function(e){t.chatWriteMsg=e},expression:"chatWriteMsg"}}),t._v(" "),a("div",{attrs:{id:"sendmsgbtndiv"}},[a("el-button",{staticClass:"fright",attrs:{disabled:t.chatWriteMsg.length<=0||t.chatExceedTip.length>0,type:"primary",size:"mini"},on:{click:t.onClickSendMsg}},[t._v("Send")]),t._v(" "),t.chatExceedTip.length>0?a("span",{staticClass:"fright exceedTip",staticStyle:{"margin-top":"6px"}},[t._v(t._s(t.chatExceedTip))]):t._e()],1)],1)],1),t._v(" "),a("div",{attrs:{id:"feeTip"}},[t._v("(Recommend set custom fee < 0.15 STX)")])])]),t._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.voteCount>0&&1==t.reqVoteFlag,expression:"voteCount>0&&reqVoteFlag==1"}],staticClass:"tp",attrs:{label:"Vote ("+t.voteCount+")",name:"vote"}},[a("div",{staticClass:"myclubsdiv"},[0==t.voteCount?a("div",{staticClass:"contentTip"},[t._v("Empty")]):t._e(),t._v(" "),a("div",{staticClass:"fcenter",attrs:{id:"launchVote"}},[a("el-button",{attrs:{type:"primary",plain:"",round:"",size:"small"},on:{click:t.onClickLaunchVote}},[t._v("Launch vote")])],1),t._v(" "),t.voteCount>0?a("div",{staticStyle:{width:"750px",margin:"16px auto"}},[a("el-table",{attrs:{data:t.voteDataList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.endBh>t.curBh&&0==e.row.selfChoice?a("div",{staticClass:"votedetail"},t._l(e.row.choices.length,function(i){return a("div",{key:i,staticClass:"canvoteitem"},[a("el-button",{staticClass:"votebtn canvotebtn",attrs:{type:"text"},on:{click:function(a){return t.onClickVoteItem(e.row.key,i)}}},[t._v(t._s(e.row.choices[i-1]))])],1)}),0):a("div",{staticClass:"votedetail"},t._l(e.row.choices.length,function(i){return a("div",{key:i,staticClass:"cannotevoteitem"},[a("div",{staticClass:"progbarouter"},[a("el-progress",{attrs:{"stroke-width":26,"show-text":!1,percentage:e.row.percentList[i-1],color:e.row.winIndex==i?"#409eff":"#ccc"}})],1),t._v(" "),a("div",{staticClass:"progtext"},[t._v(t._s(e.row.percentStrList[i-1])+"%")]),t._v(" "),a("div",{staticClass:"cannotvotef"},[t._v("\n                        "+t._s(e.row.choices[i-1])+"\n                        ")])])}),0),t._v(" "),a("div",{staticClass:"votedetail voteStat"},[t._v("\n                    "+t._s(e.row.totalVote)+" votes · "+t._s(e.row.endBh>t.curBh?t.fmtBlock(e.row.endBh-t.curBh)+" left":"Final results")+"\n                  ")])]}}],null,!1,2846998196)}),t._v(" "),a("el-table-column",{attrs:{label:"Title",width:"580"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-size":"16px"}},[t._v("\n                    "+t._s(e.row.title)+"\n                  ")])]}}],null,!1,1261230161)}),t._v(" "),a("el-table-column",{attrs:{label:"Status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.endBh>t.curBh?"#67C23A":"#999"}},[t._v(t._s(e.row.endBh>t.curBh?"live":"finished"))])]}}],null,!1,2413531422)})],1),t._v(" "),t.voteCount>25?a("div",{staticClass:"tip25"},[t._v("(Only show latest 25 votes.)")]):t._e()],1):t._e()])]),t._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.applyCount>0&&1==t.reqApplyFlag,expression:"applyCount>0&&reqApplyFlag==1"}],staticClass:"tp",attrs:{label:"Apply ("+t.applyCount+")",name:"apply"}},[a("div",{staticClass:"myclubsdiv"},[0==t.applyCount?a("div",{staticClass:"contentTip"},[t._v("Empty")]):t._e(),t._v(" "),t._l(t.applyNftDataList.length,function(e){return a("button",{key:e,staticClass:"member",on:{click:function(i){return t.onClickApplyMember(e)}}},[a("ClubMemberItem",{attrs:{nftData:t.applyNftDataList[e-1],act:t.curCtid==t.myAdminCtid?1:0},on:{click:function(i){return t.onClickRespondApply(e,i)}}})],1)})],2)]),t._v(" "),t.curCtid==t.myAdminCtid?a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.inviteCount>0&&1==t.reqInviteFlag,expression:"inviteCount>0&&reqInviteFlag==1"}],staticClass:"tp",attrs:{label:"Invite("+t.inviteCount+")",name:"invite"}},[a("div",{staticClass:"myclubsdiv"},[0==t.inviteCount?a("div",{staticClass:"contentTip"},[t._v("Empty")]):t._e(),t._v(" "),t._l(t.inviteNftDataList.length,function(e){return a("button",{key:e,staticClass:"member",on:{click:function(i){return t.onClickInviteMember(e)}}},[a("ClubMemberItem",{attrs:{nftData:t.inviteNftDataList[e-1],act:"2"},on:{click:function(i){return t.onClickCancelInvite(e,i)}}})],1)}),t._v(" "),a("div",{attrs:{id:"inviteBtn"}},[t.myAdminCtid==t.curCtid&&t.memberTidList.length<100?a("el-button",{attrs:{type:"primary",round:""},on:{click:t.onClickInvite}},[t._v("Invite")]):t._e()],1)],2)]):t._e(),t._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.eventCount>0&&1==t.reqEventFlag,expression:"eventCount>0&&reqEventFlag==1"}],staticClass:"tp",attrs:{label:"Events ("+t.eventCount+")",name:"events"}},[a("div",{staticClass:"myclubsdiv"},[0==t.eventCount?a("div",{staticClass:"contentTip"},[t._v("Empty")]):t._e(),t._v(" "),t.eventDataList.length>0?a("el-table",{attrs:{id:"eventPanel",stripe:"",border:"",size:"medium","max-height":"620",data:t.eventDataList}},[a("el-table-column",{attrs:{label:"Time",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.timeStr)+"\n              ")]}}],null,!1,3036485277)}),t._v(" "),a("el-table-column",{attrs:{label:"Content"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.content)+"\n              ")]}}],null,!1,3778289204)})],1):t._e(),t._v(" "),t.eventCount>25?a("div",{staticClass:"tip25"},[t._v("(Only show latest 25 events.)")]):t._e()],1)]),t._v(" "),t.bIsMember?a("el-tab-pane",{staticClass:"tp",attrs:{label:"Settings",name:"settings"}},[a("div",{attrs:{id:"settingdiv"}},[t.myAdminCtid==t.curCtid?a("el-button",{attrs:{type:"primary",round:""},on:{click:t.onClickEditClub}},[t._v("Edit ("+t._s(t.updateClubPrice/1e6)+" STX)")]):t._e(),t._v(" "),t.bIsMember&&t.myAdminCtid!=t.curCtid?a("el-button",{attrs:{type:"danger",round:""},on:{click:t.onClickExit}},[t._v("Exit club")]):t._e()],1)]):t._e()],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{center:!0,title:"Launch vote",visible:t.bInCreateVote,width:"800px"},on:{"update:visible":function(e){t.bInCreateVote=e}}},[a("el-form",{ref:"form",staticClass:"fcenter",attrs:{model:t.createVoteData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Title"}},[a("el-input",{attrs:{maxlength:t.maxVoteTitleLen,placeholder:"max "+t.maxVoteTitleLen+" characters"},on:{input:t.onChangeVoteTitle},model:{value:t.createVoteData.title,callback:function(e){t.$set(t.createVoteData,"title",e)},expression:"createVoteData.title"}},[t.createVoteData.titleExceedTip.length>0?a("label",{staticClass:"exceedTip",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.createVoteData.titleExceedTip))]):t._e()])],1),t._v(" "),t._l(t.createVoteData.choiceList.length,function(e){return a("el-form-item",{key:e,attrs:{label:"Choice "+e}},[a("el-input",{attrs:{maxlength:t.maxVoteChoiceLen,placeholder:(e>2?"optional, ":"")+"max "+t.maxVoteChoiceLen+" characters"},on:{input:function(i){return t.onChangeVoteChoice(e)}},model:{value:t.createVoteData.choiceList[e-1],callback:function(i){t.$set(t.createVoteData.choiceList,e-1,i)},expression:"createVoteData.choiceList[index-1]"}},[t.createVoteData.choiceExceedTip[e-1].length>0?a("label",{staticClass:"exceedTip",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.createVoteData.choiceExceedTip[e-1]))]):t._e()])],1)}),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"Days"}},[a("el-input-number",{attrs:{min:1,max:30},model:{value:t.createVoteData.days,callback:function(e){t.$set(t.createVoteData,"days",e)},expression:"createVoteData.days"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:!t.createVoteData.bAllChoiceValid||0==t.createVoteData.title.trim().length||t.createVoteData.titleExceedTip.length>0},on:{click:t.onClickSureCreateVote}},[t._v(t._s(t.votePrice>0?"Launch ("+t.votePrice/1e6+" STX)":"Create"))]),t._v(" "),a("el-button",{on:{click:function(e){t.bInCreateVote=!1}}},[t._v("Cancel")])],1)],2)],1),t._v(" "),a("el-dialog",{attrs:{center:!0,title:"Edit club",visible:t.bEditClubFlag,width:"800px"},on:{"update:visible":function(e){t.bEditClubFlag=e}}},[a("el-form",{ref:"form",attrs:{id:"nftForm",model:t.editClubData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{attrs:{maxlength:t.maxNameLen,placeholder:"Max "+t.maxNameLen+" characters"},on:{input:t.onChangeName},model:{value:t.editClubData.name,callback:function(e){t.$set(t.editClubData,"name",e)},expression:"editClubData.name"}},[t.nameExceedTip.length>0?a("label",{staticClass:"exceedTip",attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.nameExceedTip))]):t._e()])],1),t._v(" "),a("el-form-item",{attrs:{label:"Logo CID"}},[a("el-input",{attrs:{maxlength:"64",placeholder:"IPFS content id, like QmdUXVtRxKhdVhjPXCUxZGyXNHn5e2oS6pt8enPXo7X4Hk"},model:{value:t.editClubData.cid,callback:function(e){t.$set(t.editClubData,"cid",e)},expression:"editClubData.cid"}}),t._v(" "),a("div",{staticClass:"tipFormItem"},[t._v("\n          Step 1: compress your club logo\n          "),a("el-link",{staticClass:"elink",attrs:{type:"primary",href:"https://tinypng.com/",target:"_blank"}},[t._v("here")]),t._v("\n          (the smaller size it is, the quicker it shows).\n        ")],1),t._v(" "),a("div",{staticClass:"tipFormItem"},[t._v("\n          Step 2: upload compressed picture to\n          "),a("el-link",{staticClass:"elink",attrs:{type:"primary",href:"https://app.pinata.cloud/pinmanager",target:"_blank"}},[t._v("Pinta")]),t._v("(or others)\n          , copy generated CID to upper input box.\n        ")],1),t._v(" "),a("div",{staticClass:"tipFormItem"},[t._v("\n          Wait several seconds, the image will show in the preview area below.\n        ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"Bio"}},[a("el-input",{attrs:{type:"textarea",maxlength:t.maxBioLen,placeholder:"Hover mouse on image to show, max "+t.maxBioLen+" characters"},on:{input:t.onChangeBio},model:{value:t.editClubData.bio,callback:function(e){t.$set(t.editClubData,"bio",e)},expression:"editClubData.bio"}}),t._v(" "),t.bioExceedTip.length>0?a("div",{staticClass:"exceedTip"},[t._v(t._s(t.bioExceedTip))]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"Preview"}},[a("ClubItem",{attrs:{clubData:t.editClubData}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:t.nameExceedTip.length>0||t.bioExceedTip.length>0||t.editClubData.cid.trim().length<40},on:{click:t.onClickSureEditClub}},[t._v(t._s("Update ("+this.updateClubPrice/1e6+" STX)"))]),t._v(" "),a("el-button",{on:{click:function(e){t.bEditClubFlag=!1}}},[t._v("Cancel")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogNftData.name+" (#"+t.dialogNftData.tid+")",center:!0,visible:t.bDialogVisible,width:"700px"},on:{"update:visible":function(e){t.bDialogVisible=e}}},[a("img",{attrs:{id:"img",src:"https://ipfs.io/ipfs/"+(t.dialogNftData.cid&&t.dialogNftData.cid.length>0?t.dialogNftData.cid:"QmeiJEqLynPN8c13ZQKdo8VMyK62whnn1DWQrEF6dZTzep")}}),t._v(" "),t.dialogNftData.h&&t.dialogNftData.h>0?a("div",{attrs:{id:"heart"}},[a("img",{attrs:{src:i("YfaA"),width:"16",height:"16"}}),t._v(" "),a("label",{attrs:{id:"h"}},[t._v(t._s(t.dialogNftData.h))])]):t._e(),t._v(" "),a("el-descriptions",{attrs:{id:"descArea",title:"",column:1,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[t._v("Minor name")]),t._v("\n        "+t._s(t.dialogNftData.minorName.length>0?t.dialogNftData.minorName:"Not set")+"\n      ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("Owner")]),t._v(" "),a("el-link",{staticStyle:{padding:"4px 0px"},attrs:{href:"https://explorer.stacks.co/address/"+t.dialogOwner+"?chain=mainnet",target:"_blank"}},[t._v(t._s(t.dialogBNS.length>0?t.dialogBNS:t.dialogOwner))]),t._v(" "),!t.bDialogLoading&&t.dialogOwner in t.addr2bnsMap?t._e():a("i",{staticClass:"el-icon-loading"})],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("Bio")]),t._v("\n        "+t._s(t.dialogNftData.bio)+"\n      ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("Register at")]),t._v("\n        "+t._s(t.dialogRegisterStr)+"\n        "),t.bDialogLoading?a("i",{staticClass:"el-icon-loading"}):t._e()],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("Cid")]),t._v("\n        "+t._s(t.dialogNftData.cid)+"\n      ")],2)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[!t.bDialogIsSelf&&!t.bDialogForInvite&&t.myTid>0?a("el-button",{attrs:{type:"primary",round:""},on:{click:t.onClickLike}},[t._v("Like ("+t._s(t.likeCost/1e6)+" STX)")]):t._e(),t._v(" "),t.bDialogForInvite?a("el-button",{attrs:{type:"primary",round:""},on:{click:t.onClickDialogInvite}},[t._v("Invite")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"info",round:""},on:{click:function(e){t.bDialogVisible=!1}}},[t._v("Close")]),t._v(" "),!t.bDialogIsSelf&&!t.bDialogForInvite&&t.myAdminCtid==t.curCtid&&t.dialogNftData.tid in t.memberTid2NftDataMap?a("el-button",{attrs:{type:"warning",round:""},on:{click:t.onClickTransfer}},[t._v("Transfer")]):t._e(),t._v(" "),!t.bDialogIsSelf&&!t.bDialogForInvite&&t.myAdminCtid==t.curCtid&&t.dialogNftData.tid in t.memberTid2NftDataMap?a("el-button",{attrs:{type:"warning",round:""},on:{click:t.onClickKickout}},[t._v("Kick out")]):t._e()],1)],1)],1)},staticRenderFns:[]};var B=i("VU/8")(F,V,!1,function(t){i("ggYh")},"data-v-3bbc3037",null);e.default=B.exports},"5zde":function(t,e,i){i("zQR9"),i("qyJz"),t.exports=i("FeBl").Array.from},"7AYq":function(t,e){},"9bBU":function(t,e,i){i("mClu");var a=i("FeBl").Object;t.exports=function(t,e,i){return a.defineProperty(t,e,i)}},C4MV:function(t,e,i){t.exports={default:i("9bBU"),__esModule:!0}},Gu7T:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("c/Tr"),r=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,r.default)(t)}},SSmE:function(t,e){},YfTy:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"nft"}},[i("div",{attrs:{id:"tid"}},[t._v(" ")]),t._v(" "),i("el-tooltip",{attrs:{effect:"dark",content:t.clubData.bio,placement:"top"}},[i("img",{attrs:{id:"img",src:"https://ipfs.io/ipfs/"+(t.clubData.cid.length>0?t.clubData.cid:"QmeiJEqLynPN8c13ZQKdo8VMyK62whnn1DWQrEF6dZTzep")}})]),t._v(" "),t.bAdmin?i("el-tooltip",{attrs:{effect:"dark",content:"I am administrator",placement:"top"}},[i("i",{staticClass:"el-icon-s-custom admin"})]):t._e(),t._v(" "),i("div",{attrs:{id:"name"}},[t._v(t._s(t.clubData.name))]),t._v(" "),t.act?i("div",{attrs:{id:"actbtns"}},[2==t.act||3==t.act?i("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.h(!0,e)}}},[t._v(t._s(2==t.act?"Accept":"Apply"))]):t._e(),t._v(" "),1==t.act||2==t.act?i("el-button",{attrs:{type:"warning",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.h(!1,e)}}},[t._v(t._s(1==t.act?"Cancel":"Decline"))]):t._e()],1):t._e(),t._v(" "),t.bEdit?i("el-button",{attrs:{id:"edit",type:"text",icon:"el-icon-more"},on:{click:t.edit}}):t._e()],1)])},staticRenderFns:[]};var n=i("VU/8")({name:"ClubItem",props:["clubData","act","bEdit","bAdmin"],methods:{h:function(t,e){this.$emit("click",t)},edit:function(){this.$emit("edit")}}},a,!1,function(t){i("7AYq")},"data-v-37782a6a",null);e.a=n.exports},aAyW:function(t,e){t.exports=["😀","😄","😆","😊","🙂","🙃","😅","🤣","😂","😉","😜","😝","😍","😘","🤭","🤗","😎","😱","🤔","🤫","😌","😴","🥺","😳","😖","😭","🤮","😡","👏","👌","👍","👊","🤝","🙌","🙏","💪","👀","💯","🔥","💩","😈","👿","🤡","👻","👽","💋","💖","🐶","🐱","🐳","🍀","🍉","🍭","🍺","🥂","🌍","🚕","🚀","⏰","🌈","🎃","🎉","🎁","🥇","💰","🔒","🔑","🔨","🧲","💊","🙋","🙋‍♀️","🙆","🙆‍♀️","🙅","🙅‍♀️","🤷","🤷‍♀️","🧘","🧘‍♀️"]},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("C4MV"),r=(a=n)&&a.__esModule?a:{default:a};e.default=function(t,e,i){return e in t?(0,r.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},"c/Tr":function(t,e,i){t.exports={default:i("5zde"),__esModule:!0}},fBQ2:function(t,e,i){"use strict";var a=i("evD5"),n=i("X8DO");t.exports=function(t,e,i){e in t?a.f(t,e,n(0,i)):t[e]=i}},ggYh:function(t,e){},mClu:function(t,e,i){var a=i("kM2E");a(a.S+a.F*!i("+E39"),"Object",{defineProperty:i("evD5").f})},qyJz:function(t,e,i){"use strict";var a=i("+ZMJ"),n=i("kM2E"),r=i("sB3e"),l=i("msXi"),c=i("Mhyx"),o=i("QRG4"),s=i("fBQ2"),u=i("3fs2");n(n.S+n.F*!i("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,n,d,b=r(t),v="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,f=void 0!==m,p=0,g=u(b);if(f&&(m=a(m,h>2?arguments[2]:void 0,2)),void 0==g||v==Array&&c(g))for(i=new v(e=o(b.length));e>p;p++)s(i,p,f?m(b[p],p):b[p]);else for(d=g.call(b),i=new v;!(n=d.next()).done;p++)s(i,p,f?l(d,m,[n.value,p],!0):n.value);return i.length=p,i}})}});